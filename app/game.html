<!DOCTYPE html>
<html lang="en" ng-app="myApp" ng-strict-di>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Rummikub">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Rummikub</title>

    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.js"></script>

    <script src="js/services/gameLogicService.js"></script>
    <script src="js/controllers/gameCtrl.js"></script>
    <script src="js/filters/filters.js"></script>

    <!--<script src="http://yoav-zibin.github.io/emulator/resizeGameAreaService.js"></script>-->
    <script src="js/services/resizeGameAreaService.js"></script>
    <script src="http://yoav-zibin.github.io/emulator/alphaBetaService.js"></script>
    <script src="http://yoav-zibin.github.io/emulator/gameService.js"></script>
    <script src="http://yoav-zibin.github.io/emulator/messageService.js"></script>
    <script src="http://yoav-zibin.github.io/emulator/stateService.js"></script>
    <link rel="stylesheet" type="text/css" href="http://yoav-zibin.github.io/emulator/main.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/game.css">
    <link rel="stylesheet" type="text/css" href="css/app.css">
    <link rel="stylesheet" type="text/css" href="css/tile.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.min.css">
</head>

<body ng-cloak ng-controller="GameCtrl">

<div id="gameArea" class="game">

    <section class="panel-container player-panel">
        <ul class="list-inline">
            <li class="player-info" ng-repeat="i in [] | range: state.nplayers" ng-init="player=state['player'+i]">
                <span class="label label-info">player{{i}}: {{state["player" + i].tiles.length}} tiles left</span>
            </li>
        </ul>
    </section>

    <section class="panel-container center-panel">
        <div id="board">
            <div ng-repeat="row in [] | range: rows" class="board-row" style="position:absolute; top:{{100 * row / rows}}%; left: 0%; width: 100%; height:{{100.0 /rows}}%;">
                <div class="" ng-repeat="col in [] | range: cols" style="position: absolute; top: 0%; left: {{col * 100 / cols}}%; width: {{100.0 / cols}}%; height: 100%; border: groove;"
                     ng-click="boardCellClicked(row, col)">

                    <div class="tile-wrapper"
                         style="color:{{getTileByIndex(board[row][col]).color}}"
                         ng-show="shouldShowTileOnBoard(row, col)">
                        <div class="tile-score">{{getTileScore(board[row][col])}}</div>
                        <div ng-if="getTileByIndex(board[row][col]).color == 'joker'">
                            <img class="tile-joker" src="img/joker-red.png">
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <section class="panel-container info-panel">
        <div class="info"><span class="label label-warning">{{debug}}</span></div>
        <div class="game-btn">
            <button type="button" class="btn btn-info" ng-click="pickBtnClicked()">pick</button>
            <button type="button" class="btn btn-info" ng-click="meldBtnClicked()">meld</button>
        </div>
    </section>

    <section class="panel-container hand-panel">
        <a href="#hand0" style="position: absolute; top: 30%; left: 0%"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></a>
        <div id="hand" ng-click="curPlayerAreaClicked()">
            <ul>
                <li style="border: groove; height: 100%; width: {{100/(14)}}%"
                    ng-click="tileClicked(tileIndex)"
                    ng-animate="'animate'"
                    ng-repeat="tileIndex in curPlayer "
                    id="hand{{$index}}">
                    <div class="tile-wrapper"
                         style="color: {{getTileByIndex(tileIndex).color}}">
                        <div class="tile-score">{{getTileByIndex(tileIndex).score}}</div>
                        <div ng-if="getTileByIndex(tileIndex).color == 'joker'">
                            <img class="tile-joker" src="img/joker-red.png">
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <a href="#hand{{curPlayer.length}}" style="position: absolute; top: 30%; right: 0%"><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
    </section>

    <!-- Welcome Modal -->
    <!--
    <div id="welcome"  class="modal {{modalstate}}" ng-init="modalstate='show'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" ng-click="modalstate='hide'" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4> First time to play Rummikub? See rules on <a href="http://en.wikipedia.org/wiki/Rummikub">wiki</a>. </h4>
                </div>
                <div class="modal-body">
                    <div id="myCarousel" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                            <li data-target="#myCarousel" data-slide-to="1"></li>
                            <li data-target="#myCarousel" data-slide-to="2"></li>
                            <li data-target="#myCarousel" data-slide-to="3"></li>
                        </ol>

                        <div class="carousel-inner" role="listbox">
                            <div class="item active">
                                <img src="img/valid0.png">
                                <h6>Meld tiles in your hand in runs or groups</h6>
                                <img src="img/valid1.png">
                            </div>

                            <div class="item">
                                <img src="img/valid-run.png">
                                <h6 class=""> Valid runs: same color, at least 3 tiles in order </h6>
                                <img src="img/valid-run2.png">
                            </div>

                            <div class="item">
                                <img src="img/valid-group.png">
                                <h6> Valid groups: different color, same number </h6>
                                <img src="img/valid-group2.png">
                            </div>

                            <div class="item">
                                <img src="img/joker-sub1.png">
                                <h6> Use joker to substitute</h6>
                                <img src="img/joker-sub2.png">
                            </div>

                            <div class="item">
                                <h6>Sum of tiles' number >= 30 to achieve first meld.</h6>
                                <img src="img/valid-run2.png">
                                <h6> 'Pick' one more tile when cannot meld.</h6>
                            </div>

                        </div>

                        <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                            <span class="glyphicon glyphicon-chevron-right" aria-hidden="false"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" ng-click="modalstate = 'hide' " class="btn btn-default" >Skip</button>
                </div>
            </div>
        </div>
    </div>
    -->

</div> <!-- gameArea div -->


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="http://code.jquery.com/ui/1.11.2/jquery-ui.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-touch.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-animate.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.10.3/TweenMax.min.js"></script>

</body>

</html>
